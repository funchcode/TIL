# 도메인 주도 설계 철저 입문

> 나루세 마사노부 (지음)  
> 심효섭 (옮김)

## 22/01/21 ~

유용한 소프트웨어를 만들려면 이용자의 문제가 무엇인지 파악하고, 이를 해결할 수 있는 최선의 수단을 생각해야 한다.  
도메인 주도 설계는 이러한 고찰을 반복하는 설계를 통해 이용자의 세계와 소프트웨어 구현을 연결 짓는 것이 그 목적이다.

도메인이 무엇인지보다는 도메인에 포함되는 것이 무엇인가 하는 것이다.

이용자들이 직면한 문제를 해결하려면 이용자들의 문제를 정확히 이해하는 것이다.

문제를 제대로 해결하려면 먼저 문제를 파악하는 과정이 필요하지만, 기술을 중시하는 개발자는 기술적 접근법으로만 문제를 해결하려 들기 쉽다.  
그 결과, 목적 없는 소프트웨어가 만들어지는 참사가 발생한다.

값 객체와 엔티티(도메인 객체)의 차이는 동일성(Identity)을 통해 식별이 가능한지 아닌지에 있다.

엔티티나 값 객체에 정의하기 부자연스러운 처리는 도메인 서비스에 정의하면 된다.  
이때 중요한 것은 '부자연스러운 처리'에만 한정해야 한다는 점이다.  
도메인 객체가 원래 포함했어야할 지식이나 처리 내용을 모두 도메인 서비스나 애플리케이션 서비스에 빼앗겨 자신이 제공할 수 있는 정보가 없는 도메인 객체를 빈혈 도메인 모델이라고 한다.

도메인 서비스는 가능한 한 피할 것

행위가 빈약한 객체는 절차적 프로그래밍으로 빠지기 쉽기 때문에 도메인 지식을 객체의 행위로 나타낼 기회를 잃게 된다.

레파지토리 `findAll()` 메서드를 정의할 때 신중해야한다.  
복원되는 객체의 숫자에 따라 컴퓨터의 리소스가 바닥나는 상황이 벌어질 수 있기 때문이다.

애플리케이션 서비스에서 반환 값으로 도메인 객체를 그대로 반환할지는 중요한 분기점이 된다.  
문제가 되는 것은 의도하지 않은 도메인 객체의 메서드 호출이 가능하기 때문이다.  

객체의 행동을 호출하는 것은 애플리케이션 서비스의 책임이다.

도메인 객체를 직접 공개하지 않는 쪽을 권한다.  
도메인 객체는 비공개로 남겨두고 클라이언트에 데이터 전송을 위한 객체(DTO)를 만들어 여기에 데이터를 옮겨 넣어 반환하는 방법이다.  

추상 타입을 이용해 의존 관계를 제어하는 방법을 '의존 관계 역전 원칙'이라고 한다. (Dependency Inversion Principle)
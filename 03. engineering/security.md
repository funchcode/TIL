# 목차
1. [해싱과 암호화](#해싱과-암호화)
2. [단방향 해시 함수란 ?](#단방향-해시-함수란-?)
3. [해싱 함수의 한계](#해싱-함수의-한계)
4. [해싱 함수 한계 보완](#해싱-함수-한계-보완)
5. [SQL Injection](#sql-injection)

# 해싱과 암호화
해싱과 암호화는 일상에서 통용되는 단어이지만, 암호학적으로 봤을 때는 차이가 있다.  
가장 큰 차이는 '방향성'이다.  
해싱의 방향은 '단방향'이다. 즉 복호화가 불가능하다는 것이다.  
반면에 암호화는 '양방향'이다. 즉 암호화를 하면 역으로 복호화도 가능하단 얘기다.  

# 단방향 해시 함수란 ?
단방향 해시 함수는 어떤 수학적 연산 또는 알고리즘에 의해 원본 데이터를 매핑시켜 완전히 다른 암호화된 데이터로 변환시키는 것을 의미한다. 이 변환을 해시라고 하며, 해시에 의해 암호화된 데이터를 __다이제스트(digest)__ 라고 한다.  

해싱은 단방향이기 때문에 다이제스트를 복호화, 원본 데이터를 구할 수 없다.  
> DB 서버가 공격자에 의해 유저 데이터를 탈취당했다고 한들 해싱된 패스워드를 복호화해 원문을 파악할 수 없으니, 무용지물이다.  

## 해싱 함수의 한계  
1. A는 B이다.  
해싱의 특징으로 A라는 값을 대입했을 때 값은 무조건 B이다.  
따라서, 공격자들이 패스워드(A)에 대한 B라는 값의 리스트를 갖고 공유하고 있을 수 있다.  
이러한 다이제스트를 __레인보우 테이블(Rainbow Table)__ 이라고 한다.  

2. 무차별 대입 공격 (브루트포스)  
해시 함수의 경우 원래 빠른 데이터 검색을 위한 목적으로 설계되었다.  
따라서, 해시 함수를 통해 다이제스트 값을 얻는 것은 매우 빠르며 해커 또한 같은 속도를 누릴 수 있다.  
즉, 해커는 무작위의 데이터들을 계속 대입하며 갑을 유추할 수 있다.  
> 블로그에서 속도를 계산한 흥미로운 예시가 있었다. PC에서 1초당 10억 번의 연산을 수행할 수 있다고 할 경우 `SHA-256`을 완전히 해독하기 위해서는 2의 256승 즉, 115,792,089,237,316,195,423,570,985,008,687,907,853,269,984,665,640,464,564,039,457,584,007,913,129,639,936의 경우의 수를 모두 파악해야한다. 
그럼 총 **3,671,743,063,080,802,746,815,416,825,491,118,336,290,905,145,409,708,398,004,109년** 이 걸린다고 한다. 우주의 나이는 약 13,700,000,000년이라고 한다.

## 해싱 함수 한계 보완  
1. 해시 함수 여러 번 수행 [Key Stretching]  
A라는 값에 대해 해시 함수를 n번 수행하여 다이제스트 값을 얻어내는 방안이다.  
n번을 더 수행할 경우 n번이라는 수행시간이 늘어나게 되는데 소요되는 시간이 단 건으로만 볼 경우 작은 수치(0.?초)이지만 해커가 다이제스트를 얻기까지의 시간을 지연시켜 한 횟수당 0.?초가 지연되므로 매우 치명적이다.  
즉, 브루트포스를 최대한 무력화하기 위한 방법이다.  

2. 솔트 [Salt]  
해시함수를 수행하기 전에 원문에 임의의 문자열을 덧붙이는 것을 말한다. 소금을 친다.  
`패스워드+Salt -> Hash Function -> Digest`이런 방식으로.  
이렇게 했을 때 해커가 다이제스트 값을 알아낸다고 해도 __Rainbow Table__ 을 통해 패스워드 값을 알아낼 수 없다.  
추가로 각 사용자마다 Salt의 값을 다르게 줄 경우 같은 패스워드를 사용하는 유저 중 한 명의 패스워드가 완전 유출됐을 때 다른 유저는 안전하다.  
즉, 레인보우 테이블을 최대한 무력화하기 위한 방법이다.
> 솔팅할 문자열이 간단하거나 짧을 경우 큰 의미가 없어진다고 한다. 가장 효과적으로 솔트를 적용하기 위해서는 사용자 별로 고유의 솔트 값을 갖고 있어야하며, 솔트의 길이는 32비트 이상이 되어야 안전하다고 한다.  

# SQL Injection  
클라이언트에서 서버로 데이터를 전달할 때 SQL 문의 일부를 넣어 서버의 DB를 직접 조작하는 행위를 말한다.  
예를 들어 아래와 같이 조작 가능하다.  
> 유저는 로그인 화면에서 아이디, 패스워드 값을 넣어 로그인을 요청한다. 이 때 아이디는 `admin` 패스워드 값으로 `' OR '1' = '1`이란 값을 넣는다. 서버는 'SQL Injection'에 대한 어떠한 대비 없이 클라이언트에서 넘겨준 값을 그대로 사용한다고 할 경우 서버에서는 `SELECT * FROM user WHERE id = 'admin' AND password = '' OR '1' = '1';` 쿼리를 실행함으로써 로그인에 성공하게 될 수 있다.  
위의 예시 뿐만 아니라 JOIN, UNION 구문을 사용하여 공격자가 원하는 쿼리를 실행할 수 있다.  

## 참고링크  
[https://st-lab.tistory.com/100](https://st-lab.tistory.com/100)